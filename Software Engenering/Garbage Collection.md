[[Java]]

Сборка мусора - механизм очистки памяти джава (heap) области памяти в которой создаются объекты во время выполнения программы.

Память делится на поколения, в oracle hotspot jvm это young, old, perm generations.

Young gen:
Содержит вновь созданные объекты, в свою очередь делится на:
	Eden space
	Survivor space:
		S1
		S2
Old gen:
Содержит объекты пережившие несколько сборок мусора
Perm gen:
До Java 8 содержал метаданные классов и строки, затем был выпилен и заменен на Metaspace, содержащий метаданные классов, выгодно отличается тем что может динамически расширятся в зависимости от perm gen. (Строки были перенесены в хип).

Сборщики мусора считают ссылки на объекты, пока на объект есть хотя бы одна сильная ссылка [[Object link types]] (на самом деле это не так, считается достижимость объекта).

После очистки старших поколений сборщик может выполнять уплотнение для избежания фрагментации памяти.

Сборщики мусора:
##### Serial Garbage Collector - 
однопоточный, делает стоп зе ворлд, маркирует недоступные объекты на удаление, затем производит удаление
##### Parallel Garbage Collector (Throughput Collector) - 
многопоточный, делает стоп зе ворлд, маркирует недоступные объекты на удаление, затем может в параллельном режиме выполнить удаление объектов.
##### Concurrent Mark-Sweep (CMS) Collector-
1. Стоп зе ворлд в рамках которого маркирует все корневые объекты (глобальные переменные, активные потоки и т.д.)
2. Параллельная фаза маркировки, в рамках которой помечаются все недостижимые объекты
3. Стоп зе ворлд, чекаются все изменения которые произошли между первой и второй фазой
4. Параллельная очистка
##### G1 Garbage Collector - 
Алгоритм такой же как у CMS, однако отличается делением кучи на регионы

##### Z Garbage Collector (ZGC) и Shenandoah -
Разделяют кучу на много мелких регионов и собирают мусор в них независимо, позволяют минимизировать стоп зе ворлд паузы за счет того что могут перемещать объекты во время работы приложения